(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4977],{79157:function(e,t,n){"use strict";n.d(t,{i:function(){return Table}});var a=n(85893),r=n(67147),o=n(42242),l=n(24819),i=n(41016),s=n(36492),c=n(74094),d=n(27060),u=n(86010),m=n(30381),p=n.n(m),g=n(28677),h=n(53920),x=n(84105),f=n(67294),b=n(21971);let Table=e=>{var t,n,m,y,w;let{id:v,filterComponent:j,showFilter:k=!0,showPagination:N=!0,fetchingOnMount:C=!0,showPageEntries:T=!0,columns:P,fetchData:S,limit:R=10,sort:D,dir:E=b.Nm.DESC,searchQuery:B,filterQuery:_,mapDownloadData:U,subscribeChannel:z,initialValue:H=[]}=e,[L,F]=f.useState(H),{t:M}=(0,g.$G)(["common"]),[O,W]=f.useState([]),[{pageIndex:$,pageSize:V},X]=f.useState({pageIndex:0,pageSize:R}),I={page:$,limit:V,query:(null==B?void 0:B.value)?"".concat(B.key,":").concat(B.expression||"").concat(B.value):"",filter:(null==_?void 0:_.value)?_.value:"",sort:(null===(t=O[0])||void 0===t?void 0:t.id)||D,dir:(null===(n=O[0])||void 0===n?void 0:n.desc)!=null?(null===(m=O[0])||void 0===m?void 0:m.desc)?b.Nm.DESC:b.Nm.ASC:E},q=f.useMemo(()=>({pageIndex:$,pageSize:V}),[$,V]),Y=(0,s.a)({queryKey:[v,I],queryFn:()=>S?S(I):Promise.resolve({data:L,pagination:{totalRows:0,totalPages:0}}),refetchOnWindowFocus:!1,enabled:C,retry:!1}),A=(0,c.b7)({data:L,columns:P,pageCount:null===(y=Y.data)||void 0===y?void 0:y.pagination.totalPages,state:{pagination:q,sorting:O},onSortingChange:W,getSortedRowModel:(0,d.tj)(),onPaginationChange:X,getCoreRowModel:(0,d.sC)(),manualPagination:!0}),handleDownloadCSV=()=>{let e=L.map(e=>U?U(e):{...e});!function(e,t){let n=function(e){let t=Object.keys(e[0]),n=e.map(e=>t.map(t=>JSON.stringify(e[t])).join(","));return[t.join(","),...n].join("\n")}(e),a=new Blob([n],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(a,t);else{let e=document.createElement("a");if(void 0!==e.download){let n=URL.createObjectURL(a);e.setAttribute("href",n),e.setAttribute("download",t),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}}(e,"".concat(v,"-").concat(p()().format("DD-MM-YYYY_HH-mm-ss"),".csv"))},handleDownloadXLSX=()=>{let e=L.map(e=>U?U(e):{...e}),t=x.P6.json_to_sheet(e),n=x.P6.book_new();x.P6.book_append_sheet(n,t,"Sheet1"),x.NC(n,"".concat(v,"-").concat(p()().format("DD-MM-YYYY_HH-mm-ss"),".xlsx")),console.log("XLSX file created successfully")};return f.useEffect(()=>{((null==_?void 0:_.value)||(null==B?void 0:B.value))&&Y.refetch()},[null==_?void 0:_.value,null==B?void 0:B.value]),f.useEffect(()=>{var e,t;(null===(e=Y.data)||void 0===e?void 0:e.data)!==L&&F((null===(t=Y.data)||void 0===t?void 0:t.data)||L)},[Y.data]),f.useEffect(()=>{H.length>0&&F(H)},[H]),f.useEffect(()=>{if(z){let e=(0,h.io)(r.o,{autoConnect:!1,query:{room:"".concat(z,".create")}});null==e||e.connect();let t=(0,h.io)(r.o,{autoConnect:!1,query:{room:"".concat(z,".update")}});return null==t||t.connect(),null==e||e.on("".concat(z,".create"),e=>{F(t=>(t.unshift(e),t.length>10&&t.pop(),[...t]))}),null==t||t.on("".concat(z,".update"),e=>{F(t=>{let n=t.findIndex(t=>t.id===e.id);return n>0&&(t[n]=e),t.length>10&&t.pop(),[...t]})}),()=>{null==e||e.disconnect(),null==t||t.disconnect()}}},[z]),(0,a.jsxs)("div",{className:"space-y-4",children:[k&&j,(T||!!U)&&(0,a.jsxs)("div",{className:"flex items-center justify-end gap-x-4",children:[!!U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{type:"button",onClick:()=>handleDownloadCSV(),disabled:A.getRowModel().rows.length<1,className:"inline-flex w-full items-center justify-center rounded-md border border-primary-500 bg-primary-500 px-4 py-2 text-xs text-text-color-foreground hover:bg-primary-400 disabled:cursor-not-allowed disabled:opacity-75 md:w-auto",children:"Download CSV"}),(0,a.jsx)("button",{type:"button",onClick:()=>handleDownloadXLSX(),disabled:A.getRowModel().rows.length<1,className:"inline-flex w-full items-center justify-center rounded-md border border-primary-500 bg-primary-500 px-4 py-2 text-xs text-text-color-foreground hover:bg-primary-400 disabled:cursor-not-allowed disabled:opacity-75 md:w-auto",children:"Download XLSX"})]}),T&&(0,a.jsx)("select",{className:"inline-flex w-full cursor-pointer items-center justify-center rounded-md border border-primary-500 bg-primary-500 py-2 text-xs text-text-color-foreground ring-inset hover:bg-primary-400 focus:ring-2 focus:ring-primary-500 md:w-auto",value:A.getState().pagination.pageSize,onChange:e=>{A.setPageSize(Number(e.target.value))},children:[5,10,25,50,100].map(e=>(0,a.jsxs)("option",{value:e,children:[e," Entries"]},e))})]}),(0,a.jsx)("div",{className:"-mx-4 overflow-x-auto ring-1 ring-secondary-700 sm:mx-0 sm:rounded-lg",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-secondary-700",children:[(0,a.jsx)("thead",{children:A.getHeaderGroups().map(e=>(0,a.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,a.jsx)("th",{scope:"col",colSpan:e.colSpan,className:(0,u.Z)("table-cell px-3 py-3.5 text-left text-xs font-semibold text-text-color","first:table-cell first:pl-4 sm:first:pl-6","first:pr-4 last:relative last:table-cell sm:last:pr-6","[&:nth-last-child(2)]:table-cell","!text-text-color"),children:e.isPlaceholder?null:(0,a.jsxs)("div",{className:e.column.getCanSort()?"cursor-pointer select-none flex whitespace-nowrap items-center justify-between":"",onClick:e.column.getToggleSortingHandler(),children:[(0,c.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,a.jsx)(o,{className:"h-4 w-4"}),desc:(0,a.jsx)(l,{className:"h-4 w-4"})})[e.column.getIsSorted()])&&void 0!==t?t:null]})},e.id)})},e.id))}),(0,a.jsxs)("tbody",{children:[Y.isInitialLoading?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:A.getHeaderGroups().map(e=>e.headers.length)[0],className:"py-24 px-4 text-center sm:px-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsxs)("svg",{className:"-ml-1 mr-3 h-5 w-5 animate-spin text-text-color",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:4}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]})})}):A.getRowModel().rows.length<1&&(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:A.getHeaderGroups().map(e=>e.headers.length)[0],className:"py-24 px-4 text-center sm:px-6",children:[(0,a.jsx)(i,{className:"mx-auto h-12 w-12 text-text-color"}),(0,a.jsx)("h3",{className:"mt-2 font-semibold text-text-color",children:M("common:no-data")}),(0,a.jsx)("p",{className:"mt-1 text-sm text-text-color",children:M("common:no-data-description")})]})}),A.getRowModel().rows.map(e=>(0,a.jsx)("tr",{children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{className:(0,u.Z)("table-cell px-3 py-3.5 text-left text-xs font-medium text-text-color","first:table-cell first:pl-4 sm:first:pl-6","first:pr-4 last:relative last:table-cell sm:last:pr-6","[&:nth-last-child(2)]:table-cell","!text-text-color"),children:(0,a.jsx)("div",{className:"whitespace-nowrap",children:(0,c.ie)(e.column.columnDef.cell,e.getContext())})},e.id))},e.id))]})]})}),N&&(0,a.jsx)(Pagination,{pageIndex:A.getState().pagination.pageIndex,pageSize:A.getState().pagination.pageSize,setPage:e=>A.setPageIndex(e),totalRows:null===(w=Y.data)||void 0===w?void 0:w.pagination.totalRows,previousPage:()=>A.previousPage(),nextPage:()=>A.nextPage(),disablePrev:!A.getCanPreviousPage(),disableNext:!A.getCanNextPage()})]})},Pagination=e=>{let{pageIndex:t=1,pageSize:n=0,totalRows:r=0,...o}=e,l=f.useMemo(()=>Math.ceil(r/n),[r,n]),i=[];for(let e=0;e<(l>5?5:l);e++)i.push(e);let s=i.map(e=>{let n=0;return l>5&&(t>1&&(n=t-2),t>l-3&&(n=l-5)),e+n}),c=t*n+(r>0?1:0),d=n*(t+1),{t:m}=(0,g.$G)(["common"]);return(0,a.jsxs)("nav",{className:"flex items-center justify-between","aria-label":"Pagination",children:[(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsxs)("p",{className:"text-sm text-text-color",children:[m("common:showing")," ",(0,a.jsx)("span",{className:"font-medium",children:c})," ",m("common:to")," ",(0,a.jsx)("span",{className:"font-medium",children:r<d?r:d})," ",m("common:of")," ",(0,a.jsx)("span",{className:"font-medium",children:r})," ",m("common:results")]})}),(0,a.jsxs)("div",{className:"flex flex-1 justify-between sm:justify-end",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o.previousPage(),disabled:o.disablePrev,className:"relative inline-flex items-center rounded-md  bg-secondary-600 px-4 py-2 text-sm font-semibold text-text-color ring-1 ring-inset ring-transparent hover:bg-secondary-700 focus-visible:outline-offset-0 disabled:cursor-not-allowed disabled:opacity-75",children:m("common:prev")}),(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2",children:s.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>o.setPage(e),className:(0,u.Z)("relative ml-3 inline-flex h-9 w-9 items-center justify-center rounded-md text-sm font-semibold text-text-color ring-1 ring-inset ring-transparent focus-visible:outline-offset-0 disabled:cursor-not-allowed disabled:opacity-75",t===e?"bg-primary-500 hover:bg-primary-400":"bg-secondary-700 hover:bg-secondary-600"),children:e+1},e))}),(0,a.jsx)("button",{type:"button",onClick:()=>o.nextPage(),disabled:o.disableNext,className:"relative ml-3 inline-flex items-center rounded-md  bg-secondary-600 px-4 py-2 text-sm font-semibold text-text-color ring-1 ring-inset ring-transparent hover:bg-secondary-700 focus-visible:outline-offset-0 disabled:cursor-not-allowed disabled:opacity-75",children:m("common:next")})]})]})}},67147:function(e,t,n){"use strict";n.d(t,{o:function(){return r},t:function(){return o}});var a=n(90210);let r=(0,a.OB)("NEXT_PUBLIC_SOCKET_URL"),o=(0,a.OB)("NEXT_PUBLIC_SOCKET_PREFIX")},21971:function(e,t,n){"use strict";n.d(t,{Nm:function(){return r}});var a,r,o=n(20299),l=n(4548),i=n(3712),s=n(48874);(a=r||(r={}))[a.DESC=0]="DESC",a[a.ASC=1]="ASC";let Empty$Type=class Empty$Type extends s.C{create(e){let t={};return globalThis.Object.defineProperty(t,i.C,{enumerable:!1,value:this}),void 0!==e&&(0,l.l)(this,t,e),t}internalBinaryRead(e,t,n,a){return null!=a?a:this.create()}internalBinaryWrite(e,t,n){let a=n.writeUnknownFields;return!1!==a&&(!0==a?o.z.onWrite:a)(this.typeName,e,t),t}constructor(){super("client_api.v1.Empty",[])}};new Empty$Type;let ErrorBodyResponse$Type=class ErrorBodyResponse$Type extends s.C{create(e){let t={error:!1,code:0,message:""};return globalThis.Object.defineProperty(t,i.C,{enumerable:!1,value:this}),void 0!==e&&(0,l.l)(this,t,e),t}internalBinaryRead(e,t,n,a){let r=null!=a?a:this.create(),l=e.pos+t;for(;e.pos<l;){let[t,a]=e.tag();switch(t){case 1:r.error=e.bool();break;case 2:r.code=e.uint32();break;case 3:r.message=e.string();break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error("Unknown field ".concat(t," (wire type ").concat(a,") for ").concat(this.typeName));let i=e.skip(a);!1!==l&&(!0===l?o.z.onRead:l)(this.typeName,r,t,a,i)}}return r}internalBinaryWrite(e,t,n){!1!==e.error&&t.tag(1,o.TD.Varint).bool(e.error),0!==e.code&&t.tag(2,o.TD.Varint).uint32(e.code),""!==e.message&&t.tag(3,o.TD.LengthDelimited).string(e.message);let a=n.writeUnknownFields;return!1!==a&&(!0==a?o.z.onWrite:a)(this.typeName,e,t),t}constructor(){super("client_api.v1.ErrorBodyResponse",[{no:1,name:"error",kind:"scalar",T:8},{no:2,name:"code",kind:"scalar",T:13},{no:3,name:"message",kind:"scalar",T:9}])}};new ErrorBodyResponse$Type;let Sort$Type=class Sort$Type extends s.C{create(e){let t={column:"",direction:""};return globalThis.Object.defineProperty(t,i.C,{enumerable:!1,value:this}),void 0!==e&&(0,l.l)(this,t,e),t}internalBinaryRead(e,t,n,a){let r=null!=a?a:this.create(),l=e.pos+t;for(;e.pos<l;){let[t,a]=e.tag();switch(t){case 1:r.column=e.string();break;case 2:r.direction=e.string();break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error("Unknown field ".concat(t," (wire type ").concat(a,") for ").concat(this.typeName));let i=e.skip(a);!1!==l&&(!0===l?o.z.onRead:l)(this.typeName,r,t,a,i)}}return r}internalBinaryWrite(e,t,n){""!==e.column&&t.tag(1,o.TD.LengthDelimited).string(e.column),""!==e.direction&&t.tag(2,o.TD.LengthDelimited).string(e.direction);let a=n.writeUnknownFields;return!1!==a&&(!0==a?o.z.onWrite:a)(this.typeName,e,t),t}constructor(){super("client_api.v1.Sort",[{no:1,name:"column",kind:"scalar",T:9},{no:2,name:"direction",kind:"scalar",T:9}])}};new Sort$Type;let PaginationResponse$Type=class PaginationResponse$Type extends s.C{create(e){let t={limit:0,page:0,totalRows:"0",totalPages:0};return globalThis.Object.defineProperty(t,i.C,{enumerable:!1,value:this}),void 0!==e&&(0,l.l)(this,t,e),t}internalBinaryRead(e,t,n,a){let r=null!=a?a:this.create(),l=e.pos+t;for(;e.pos<l;){let[t,a]=e.tag();switch(t){case 1:r.limit=e.int32();break;case 2:r.page=e.int32();break;case 3:r.totalRows=e.int64().toString();break;case 4:r.totalPages=e.int32();break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error("Unknown field ".concat(t," (wire type ").concat(a,") for ").concat(this.typeName));let i=e.skip(a);!1!==l&&(!0===l?o.z.onRead:l)(this.typeName,r,t,a,i)}}return r}internalBinaryWrite(e,t,n){0!==e.limit&&t.tag(1,o.TD.Varint).int32(e.limit),0!==e.page&&t.tag(2,o.TD.Varint).int32(e.page),"0"!==e.totalRows&&t.tag(3,o.TD.Varint).int64(e.totalRows),0!==e.totalPages&&t.tag(4,o.TD.Varint).int32(e.totalPages);let a=n.writeUnknownFields;return!1!==a&&(!0==a?o.z.onWrite:a)(this.typeName,e,t),t}constructor(){super("client_api.v1.PaginationResponse",[{no:1,name:"limit",kind:"scalar",T:5},{no:2,name:"page",kind:"scalar",T:5},{no:3,name:"totalRows",kind:"scalar",T:3},{no:4,name:"totalPages",kind:"scalar",T:5}])}};new PaginationResponse$Type;let HealthCheckRequest$Type=class HealthCheckRequest$Type extends s.C{create(e){let t={};return globalThis.Object.defineProperty(t,i.C,{enumerable:!1,value:this}),void 0!==e&&(0,l.l)(this,t,e),t}internalBinaryRead(e,t,n,a){return null!=a?a:this.create()}internalBinaryWrite(e,t,n){let a=n.writeUnknownFields;return!1!==a&&(!0==a?o.z.onWrite:a)(this.typeName,e,t),t}constructor(){super("client_api.v1.HealthCheckRequest",[])}};new HealthCheckRequest$Type;let HealthCheckResponse$Type=class HealthCheckResponse$Type extends s.C{create(e){let t={error:!1,code:0,message:""};return globalThis.Object.defineProperty(t,i.C,{enumerable:!1,value:this}),void 0!==e&&(0,l.l)(this,t,e),t}internalBinaryRead(e,t,n,a){let r=null!=a?a:this.create(),l=e.pos+t;for(;e.pos<l;){let[t,a]=e.tag();switch(t){case 1:r.error=e.bool();break;case 2:r.code=e.int32();break;case 3:r.message=e.string();break;default:let l=n.readUnknownField;if("throw"===l)throw new globalThis.Error("Unknown field ".concat(t," (wire type ").concat(a,") for ").concat(this.typeName));let i=e.skip(a);!1!==l&&(!0===l?o.z.onRead:l)(this.typeName,r,t,a,i)}}return r}internalBinaryWrite(e,t,n){!1!==e.error&&t.tag(1,o.TD.Varint).bool(e.error),0!==e.code&&t.tag(2,o.TD.Varint).int32(e.code),""!==e.message&&t.tag(3,o.TD.LengthDelimited).string(e.message);let a=n.writeUnknownFields;return!1!==a&&(!0==a?o.z.onWrite:a)(this.typeName,e,t),t}constructor(){super("client_api.v1.HealthCheckResponse",[{no:1,name:"error",kind:"scalar",T:8},{no:2,name:"code",kind:"scalar",T:5},{no:3,name:"message",kind:"scalar",T:9}])}};new HealthCheckResponse$Type},20067:function(){},72061:function(){}}]);