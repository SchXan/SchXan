(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1312],{6821:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-in",function(){return s(54384)}])},94212:function(e,t,s){"use strict";s.d(t,{z:function(){return Button}});var r=s(85893),n=s(86010);s(67294);var a=s(93327);let Button=e=>{let{type:t="button",className:s,replaceClassName:a=!1,children:i,...o}=e;return(0,r.jsx)("button",{className:a?s:(0,n.Z)("inline-flex items-center justify-center rounded-md bg-primary-500 px-4 py-2 text-sm font-medium text-text-color-foreground transition-colors duration-300 hover:bg-primary-400 disabled:cursor-not-allowed disabled:opacity-75",s),type:t,...o,children:i})};Button.Link=e=>{let{href:t,className:s,children:i}=e;return(0,r.jsx)(a.r,{href:t,className:(0,n.Z)("inline-flex items-center justify-center rounded-md bg-primary-500 px-4 py-2 text-sm font-medium text-text-color-foreground transition-colors duration-300 hover:bg-primary-400",s),children:i})}},73536:function(e,t,s){"use strict";s.d(t,{II:function(){return o},XZ:function(){return l},e6:function(){return Range},qw:function(){return DebouncedInput}});var r=s(85893),n=s(86010),a=s(67294),i=s(69854);let o=a.forwardRef((e,t)=>{let{type:s="text",className:a,...i}=e;return(0,r.jsx)("div",{className:"flex flex-col items-start",children:(0,r.jsx)("input",{className:(0,n.Z)("relative block w-full appearance-none rounded-none border border-primary-500 bg-secondary-700 px-3 py-2 text-xs text-white placeholder-secondary-200 focus:z-10 focus:border-primary-500 focus:outline-none focus:ring-primary-500 disabled:cursor-not-allowed disabled:opacity-75","!rounded-md !border-bg-color !bg-secondary-200 !text-black !placeholder-black/60 accent-secondary-800 !ring-0 placeholder:text-xs focus:!bg-white focus:!ring-transparent dark:!text-secondary-800 dark:!placeholder-secondary-800",a),type:s,ref:t,...i})})});o.displayName="Input";let l=a.forwardRef((e,t)=>{let{id:s,children:a,className:o,classNameLabel:l,...c}=e;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",className:(0,n.Z)("h-4 w-4 cursor-pointer rounded border-primary-600 text-black focus:ring-primary-400 focus:ring-offset-bg-color",o),ref:t,id:s,...c}),(0,r.jsx)(i._,{htmlFor:s,className:(0,n.Z)("ml-3 block cursor-pointer select-none text-sm text-white",l),children:a})]})});l.displayName="Checkbox";let Range=e=>(0,r.jsx)("input",{type:"range",className:"range-lg h-2 w-full cursor-pointer appearance-none rounded-lg bg-secondary-200 accent-primary-500",...e}),DebouncedInput=e=>{let{value:t,onChange:s,debounce:n=500,...i}=e,[l,c]=a.useState(t);return a.useEffect(()=>{c(t)},[t]),a.useEffect(()=>{let e=setTimeout(()=>{s(l)},n);return()=>clearTimeout(e)},[l]),(0,r.jsx)(o,{...i,value:l,className:"!rounded-md",onChange:e=>c(e.target.value)})}},69854:function(e,t,s){"use strict";s.d(t,{_:function(){return Label}});var r=s(85893),n=s(86010);s(67294);let Label=e=>{let{htmlFor:t,value:s,className:a,children:i}=e;return(0,r.jsx)("label",{htmlFor:t,className:(0,n.Z)("block text-xs font-medium text-text-color",a),children:s||i})}},20278:function(e,t,s){"use strict";s.d(t,{K:function(){return ToastNotif}});var r=s(85893),n=s(22754),a=s(86010),i=s(28677);s(67294);let ToastNotif=e=>{let{open:t,handleClose:s,message:o}=e,{t:l}=(0,i.$G)(["common"]);return(0,r.jsxs)("div",{className:(0,a.Z)(t?"animate-enter":"animate-leave","pointer-events-auto flex w-full max-w-md rounded-lg bg-emerald-500/80 shadow-lg ring-1 ring-black ring-opacity-5"),children:[(0,r.jsx)("div",{className:"w-0 flex-1 p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"rounded-full bg-white p-1",children:(0,r.jsx)(n,{width:16,color:"rgba(34, 197, 94, 1)"})})}),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-white",children:l("common:successfull")}),(0,r.jsx)("p",{className:"mt-1 text-sm text-white",children:o})]})]})}),(0,r.jsx)("div",{className:"flex border-l border-emerald-300/80",children:(0,r.jsx)("button",{onClick:()=>s(),className:"flex w-full items-center justify-center rounded-none rounded-r-lg border border-transparent p-4 text-sm font-medium text-white hover:text-white focus:outline-none",children:l("common:close")})})]})}},32758:function(e,t,s){"use strict";s.d(t,{Z:function(){return withAuth}});var r=s(85893),n=s(82120),a=s(96608),i=s(31955),o=s(86501),l=s(67294),c=s(11163),u=s(20278);let d="/sign-in";function withAuth(e,t,s){let ComponentWithAuth=s=>{let m=(0,c.useRouter)(),{query:h}=m,{profile:p,isLoading:x,setProfile:f,stopLoading:g}=(0,a.O)();return(l.useEffect(()=>{let checkAuth=()=>{let e=i.Z.get("bj-token");if(!e){p&&(i.Z.remove("bj-token"),f(null),m.push(d),o.Am.custom(e=>(0,r.jsx)(u.K,{open:e.visible,handleClose:()=>o.Am.dismiss(e.id),message:"You have successfully logged out"}))),g();return}let loadUser=async()=>{try{var e,t;let s=await n.hi.get("/profile");f({balance:null===(e=s.data.data)||void 0===e?void 0:e.balance,user:null===(t=s.data.data)||void 0===t?void 0:t.user})}catch(e){i.Z.remove("bj-token")}finally{g()}};p||loadUser()};return checkAuth(),window.addEventListener("focus",checkAuth),()=>{window.removeEventListener("focus",checkAuth)}},[p,m,f,g]),l.useEffect(()=>{x||(p?"auth"===t&&((null==h?void 0:h.redirect)?m.replace(h.redirect):m.push("/dashboard")):"auth"!==t&&"optional"!==t&&m.replace("".concat(d,"?redirect=").concat(m.asPath),"".concat(d)))},[p,x,h,m]),(x||!p)&&"auth"!==t&&"optional"!==t)?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex min-h-screen flex-col items-center justify-center bg-bg-color text-text-color",children:[(0,r.jsxs)("svg",{className:"mb-4 h-7 w-7 animate-spin text-text-color",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:4}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{children:"Loading..."})]}):(0,r.jsx)(e,{...s})};return ComponentWithAuth.Props={Layout:s},ComponentWithAuth}},12530:function(e,t,s){"use strict";s.d(t,{Gn:function(){return useUpdateProfile},QS:function(){return useSignUp},SY:function(){return useGenerateApiKey},l8:function(){return useTokenConfirmation},pO:function(){return useForgotPassword},y8:function(){return useChangePassword},zq:function(){return useSignIn}});var r=s(82120),n=s(48228);let useSignIn=e=>(0,n.D)({mutationKey:["sign-in"],mutationFn:async e=>{let{data:t}=await r.hi.post("/sign-in",e);return t.data},...e}),useSignUp=e=>(0,n.D)({mutationKey:["sign-up"],mutationFn:async e=>{let{data:t}=await r.hi.post("/sign-up",e);return t.data},...e}),useTokenConfirmation=e=>(0,n.D)({mutationKey:["token-confirmation"],mutationFn:async e=>{let{token:t,otp:s}=e,{data:n}=await r.hi.post("/confirmation/".concat(t),{otp:s});return n.code},...e}),useUpdateProfile=e=>(0,n.D)({mutationKey:["update-profile"],mutationFn:async e=>{let{data:t}=await r.hi.post("/profile",e);return t.data},...e}),useGenerateApiKey=e=>(0,n.D)({mutationKey:["reset-token"],mutationFn:async()=>{let{data:e}=await r.hi.post("/reset-token");return e.data},...e}),useChangePassword=e=>(0,n.D)({mutationKey:["change-password"],mutationFn:async e=>{let{data:t}=await r.hi.post("/reset-password",e);return t.data},...e}),useForgotPassword=e=>(0,n.D)({...e,mutationKey:["forgot-password"],mutationFn:async e=>{let{data:t}=await r.hi.post("/forgot-password",e);return t}})},84088:function(e,t,s){"use strict";s.d(t,{Z:function(){return AuthLayout}});var r=s(85893),n={src:"/_next/static/media/wallpaper-auth.30a42650.webp",height:1080,width:1920,blurDataURL:"data:image/webp;base64,UklGRkwAAABXRUJQVlA4IEAAAADQAQCdASoIAAUAAkA4JYgCdAEfaE+3AAD+9MVmT+4KJTyOJJ3/6KJr+/Bc8WM/GcOnKmmUNhgxbGIUNCJGAAAA",blurWidth:8,blurHeight:5},a=s(80243);s(67294);var i=s(25675),o=s.n(i),l=s(11163),c=s(94212);function AuthLayout(e){let{children:t,seo:s}=e,{pathname:i}=(0,l.useRouter)();return(0,r.jsxs)("div",{className:"relative flex min-h-screen items-center justify-center px-4 sm:px-32",children:[(0,r.jsx)("div",{className:"absolute top-4 left-4 z-20",children:(0,r.jsx)(c.z.Link,{href:"/",className:"!hover:bg-secondary-400 !bg-secondary-500 !p-2",children:(0,r.jsx)(a,{className:"h-5 w-5"})})}),((null==s?void 0:s.loginBackgroundImage)||(null==s?void 0:s.registerBackgroundImage))&&(0,r.jsx)(o(),{src:"/sign-in"===i?null==s?void 0:s.loginBackgroundImage:"/sign-up"===i?null==s?void 0:s.registerBackgroundImage:n,alt:"",fill:!0,sizes:"100vw",className:"object-cover object-[75%_50%] lg:object-[70%_50%] xl:object-center"}),(0,r.jsx)("div",{className:"absolute inset-0 z-10 bg-gradient-to-tr from-zinc-700 via-zinc-700/75"}),(0,r.jsx)("main",{className:"z-20 w-full",children:t})]})}},54384:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return I}});var r=s(85893),n=s(12530),a=s(96608),i=s(80243),o=s(33146),l=s(7527),c=s(56047),u=s(9648),d=s(47533),m=s(31955),h=s(28677),p=s(90210),x=s(34853),f=s(87536),g=s(86501),b=s(16310),v=s(67294),y=s(11163),w=s(84088),j=s(94212),N=s(73536),k=s(69854),A=s(93327),_=s(22849),C=s(20278),S=s(32758);let E=b.Ry({username:b.Z_().required("Username is a required field").min(4,"Username must be at least 4 characters").max(25,"Username must be at most 25 characters").matches(/^[a-zA-Z0-9]+$/,"Username must be alphanumeric"),password:b.Z_().required("Password is a required field"),rememberMe:b.Xg()}).required(),T="true"===(0,p.OB)("NEXT_PUBLIC_HAS_REGISTER");var I=!0;t.default=(0,S.Z)(e=>{var t,s;let{meta:b}=e,w=v.useRef(null),S=(0,y.useRouter)(),{setProfile:I}=(0,a.O)(),{t:P}=(0,h.$G)(["common","auth"]),[U,Z]=v.useState(!1),[R,L]=v.useState(""),[F,O]=v.useState("password"),{register:z,handleSubmit:B,formState:{errors:K},getValues:D}=(0,f.cI)({resolver:(0,d.X)(E)}),W=(0,n.zq)({onSuccess:e=>{var t;m.Z.set("bj-token",null===(t=e.user)||void 0===t?void 0:t.token,{expires:D("rememberMe")?14:1}),I({balance:e.balance,user:e.user}),S.push("/dashboard"),g.ZP.custom(t=>{var s;return(0,r.jsx)(C.K,{open:t.visible,handleClose:()=>g.ZP.dismiss(t.id),message:"Hi ".concat(null===(s=e.user)||void 0===s?void 0:s.fullname,"! Welcome to ").concat(null==b?void 0:b.url)})})},onError:e=>{var t;L(null===(t=e.response)||void 0===t?void 0:t.data.message)}}),G=B(async e=>{try{var t;let s=null===(t=w.current)||void 0===t?void 0:t.getValue();if(!s){g.ZP.error("Error verifying re-CAPTCHA!");return}W.mutate({username:e.username,password:e.password,rememberMe:e.rememberMe||!1,token:s})}catch(e){throw e}});return v.useEffect(()=>{setTimeout(()=>{Z(!0)},500)},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.H,{meta:{...b,title:"".concat(P("auth:sign-in-button")," / ").concat(b.title)}}),(0,r.jsxs)("div",{className:"mx-auto w-full max-w-md space-y-8 lg:mx-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mt-2 text-2xl font-bold tracking-tight text-white sm:text-3xl",children:P("auth:sign-in-button")}),(0,r.jsx)("p",{className:"mt-2 text-sm text-white",children:P("auth:description")})]}),R&&(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-md bg-rose-500 px-4 py-3 text-sm",children:[(0,r.jsx)("div",{children:R}),(0,r.jsx)("button",{type:"button",onClick:()=>L(""),children:(0,r.jsx)(i,{className:"h-4 w-4"})})]}),(0,r.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:G,children:[(0,r.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"}),(0,r.jsxs)("div",{className:"space-y-3 rounded-md shadow-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k._,{htmlFor:"username",className:"pb-2 !text-white",children:P("auth:username")}),(0,r.jsx)(N.II,{id:"username",type:"text",className:"!rounded-md",placeholder:P("auth:username"),...z("username")}),(0,r.jsx)("span",{className:"text-xs text-rose-500",children:null===(t=K.username)||void 0===t?void 0:t.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(k._,{htmlFor:"password",className:"pb-2 !text-white",children:P("auth:password")}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(N.II,{id:"password",type:F,autoComplete:"current-password",className:"!rounded-md",placeholder:P("auth:password"),...z("password")}),(0,r.jsx)("button",{type:"button",className:"absolute top-0 right-4 z-20 h-full text-secondary-700",onClick:()=>O("password"!==F?"password":"text"),children:"password"===F?(0,r.jsx)(o,{className:"h-4 w-4"}):(0,r.jsx)(l,{className:"h-4 w-4"})})]}),(0,r.jsx)("span",{className:"text-xs text-rose-500",children:null===(s=K.password)||void 0===s?void 0:s.message})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(N.XZ,{id:"remember-me",...z("rememberMe"),children:P("auth:remember-me")})}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsx)(A.r,{href:"/forgot-password",className:"font-medium text-primary-500 hover:text-primary-400",children:P("auth:forgot-password")})})]}),U&&(0,r.jsx)(x.Z,{ref:w,theme:"light",size:"normal",sitekey:(0,p.OB)("NEXT_PUBLIC_RECAPTHA_SITE_KEY")}),(0,r.jsx)("div",{children:(0,r.jsxs)(j.z,{type:"submit",className:"group relative flex w-full",disabled:W.isLoading,children:[(0,r.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(c,{className:"h-5 w-5","aria-hidden":"true"})}),W.isLoading?"Loading ...":P("auth:sign-in-button")]})}),T&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"relative mt-6",children:(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-2 text-white",children:P("auth:dont-have-account")})})}),(0,r.jsx)("div",{children:(0,r.jsxs)(j.z.Link,{href:"/sign-up",className:"group relative flex w-full !bg-secondary-500 hover:!bg-secondary-400",children:[(0,r.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,r.jsx)(u,{className:"h-5 w-5","aria-hidden":"true"})}),P("auth:sign-up-button")]})})]})]})]})]})},"auth",w.Z)},96608:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});var r=s(90210),n=s(64529);let a=(0,n.Ue)(e=>({profile:null,isLoading:!0,setProfile:t=>e(()=>({profile:t})),stopLoading:()=>e(()=>({isLoading:!1})),permission:{canUseAuth:"true"===(0,r.OB)("NEXT_PUBLIC_HAS_AUTH")}}))},92703:function(e,t,s){"use strict";var r=s(50414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,e.exports=function(){function shim(e,t,s,n,a,i){if(i!==r){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function getShim(){return shim}shim.isRequired=shim;var e={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return e.PropTypes=e,e}},45697:function(e,t,s){e.exports=s(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[5675,2216,8444,9774,2888,179],function(){return e(e.s=6821)}),_N_E=e.O()}]);